<div class="flex w-full mb-4" [class.justify-end]="message.role === 'user'">
  <div
    class="max-w-[85%] rounded-2xl px-4 py-2.5"
    [ngClass]="message.role === 'user'
      ? ['bg-brand', 'text-zinc-900', 'rounded-br-sm']
      : ['bg-gray-100', 'dark:bg-zinc-800', 'text-gray-800', 'dark:text-zinc-100', 'rounded-bl-sm']"
  >
    @for (block of message.blocks; track $index) {
      @if (isText(block)) {
        <p class="text-sm leading-relaxed whitespace-pre-wrap">{{ block.text }}</p>
      } @else if (isError(block)) {
        <p class="text-sm text-red-500 dark:text-red-400">âš  {{ block.text }}</p>
      }
    }

    @if (!message.finalized && message.role === 'assistant') {
      <span class="inline-block w-2 h-4 bg-current animate-pulse ml-0.5 align-middle rounded-sm"></span>
    }
  </div>
</div>
