<div class="my-1.5 rounded-md overflow-hidden border border-zinc-700 bg-zinc-900 text-xs font-mono">
  <button
    (click)="toggle()"
    class="w-full flex items-center gap-2 px-3 py-1.5 text-left hover:bg-zinc-800 transition-colors"
  >
    <span class="text-brand">⚙</span>
    <span class="text-brand-300 font-semibold">{{ block.name }}</span>
    @if (block.result) {
      <span class="ml-1 text-green-500 text-[10px]">✓</span>
    } @else {
      <span class="ml-1 text-yellow-500 text-[10px] animate-pulse">…</span>
    }
    <span class="ml-auto text-zinc-600 text-[10px]">{{ collapsed() ? '▶' : '▼' }}</span>
  </button>

  @if (!collapsed()) {
    <div class="border-t border-zinc-700 px-3 py-2">
      <p class="text-zinc-500 text-[10px] uppercase tracking-wider mb-1">args</p>
      <pre class="text-zinc-300 overflow-x-auto whitespace-pre-wrap break-all">{{ argsJson }}</pre>
    </div>
    @if (block.result) {
      <div class="border-t border-zinc-700 px-3 py-2">
        <p class="text-zinc-500 text-[10px] uppercase tracking-wider mb-1">result</p>
        <pre class="text-green-400 overflow-x-auto whitespace-pre-wrap break-all">{{ block.result }}</pre>
      </div>
    }
  }
</div>
